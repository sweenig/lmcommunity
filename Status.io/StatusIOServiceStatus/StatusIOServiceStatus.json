{
  "id" : 12904219,
  "description" : "Monitor status of services.",
  "group" : "",
  "appliesTo" : "statusio_key || auto.statusio_key",
  "technology" : "Add status.[App].io as a resource and add 'statusio_key' as a property. To find the key, go to 'https://status.[App].us/api/v2#summary', expand the example, and look for the key in the url 'https://[key].statuspage.io/api/v2/summary.json'.\nIf the FQDN is not key.statuspage.io, this version of the DS will not work.",
  "tags" : "chat,zoom,networking,video",
  "checksum" : "a75e687920553f4fbff50d04b5a24401",
  "lineageId" : "oFBUdKvUTwCM8oAyyv5wrg",
  "name" : "StatusIOServiceStatus",
  "displayName" : "Service Status",
  "version" : 1587060760,
  "auditVersion" : 0,
  "hasMultiInstances" : true,
  "collectInterval" : 300,
  "collectMethod" : "batchscript",
  "collectorAttribute" : {
    "name" : "batchscript",
    "linuxCmdline" : "",
    "linuxScript" : "",
    "groovyScript" : "import groovy.json.JsonSlurper\n\ndef statusIoKey = hostProps.get(\"statusio_key\") ?: hostProps.get(\"auto.statusio_key\")\ndef statusIoDomain = hostProps.get(\"statusio_domain\") ?: \"statuspage.io\"\n\nurl = \"https://${statusIoKey}.${statusIoDomain}/api/v2/summary.json\"\n\ndef STATUS_MAP = [\"operational\":0, \"degraded_performance\": 1, \"partial_outage\": 2, \"major_outage\": 3]\n\ndef payload = url.toURL().getText()\ndef status = new JsonSlurper().parseText(payload)\n\nstatus.components.each { component ->\n    println \"${component.id}.status=${STATUS_MAP.get(component.status, component.status)}\"\n}\n\nreturn 0",
    "scriptType" : "embed",
    "windowsCmdline" : "",
    "windowsScript" : ""
  },
  "enableAutoDiscovery" : true,
  "autoDiscoveryConfig" : {
    "persistentInstance" : false,
    "disableInstance" : false,
    "deleteInactiveInstance" : false,
    "instanceAutoGroupMethod" : "ilp",
    "instanceAutoGroupMethodParams" : "auto.group",
    "scheduleInterval" : 60,
    "method" : {
      "name" : "ad_script",
      "type" : "embeded",
      "winScript" : null,
      "winCmdline" : null,
      "linuxCmdline" : null,
      "linuxScript" : null,
      "groovyScript" : "import groovy.json.JsonSlurper\n\ndef statusIoKey = hostProps.get(\"statusio_key\") ?: hostProps.get(\"auto.statusio_key\")\ndef statusIoDomain = hostProps.get(\"statusio_domain\") ?: \"statuspage.io\"\n\nurl = \"https://${statusIoKey}.${statusIoDomain}/api/v2/summary.json\"\n\ndef payload = url.toURL().getText()\n// println(payload);println(\"=\".multiply(80))\ndef status = new JsonSlurper().parseText(payload)\n\nstatus.components.each { component ->\n  if (component.group == true) {\n    group = \"group=\" + component.name\n  } else {\n    if (component.group_id){\n      group = \"group=\" + status.components.find{it.id == component.group_id}.name\n    } else {\n      group = \"\"\n    }\n  }\n    println \"${component.id}##${component.name}######${group}\"\n}\n\nreturn 0\n\n\n// import groovy.json.*\n\n// def statusIoKey = hostProps.get(\"statusio_key\") ?: hostProps.get(\"auto.statusio_key\")\n\n// url = \"https://${statusIoKey}.statuspage.io/api/v2/summary.json\"\n// def status = new JsonSlurper().parseText(url.toURL().getText())\n// easy_map = [:]\n//\n// status.components.each { component->\n//     if(component.group == false) {easy_map[component.id] = component}\n// }\n//\n// status.components.each {group->\n//     if(group.group == true) {\n//         group.components.each { sub_component ->\n//             group_component = group.name.replace(\" \",\"_\") + \"_\" + easy_map[sub_component]['name'].replace(\" \",\"_\")\n//             println group_component + \"##\" + easy_map[sub_component]['name'] + \" - \" + group.name + \"######auto.status_group=${group.name}\"\n//         }\n//     } else if(group.group_id == null) {\n//         println group.name.replace(\" \",\"_\") + \"##\" + group.name\n//     }\n// }\n// return 0\n"
    },
    "filters" : [ ]
  },
  "dataPoints" : [ {
    "id" : 17646,
    "dataSourceId" : 12904219,
    "name" : "Status",
    "description" : "Status of the particular service.\n\nStatus codes:\n0=operational,\n1=degraded performance,\n2=partial outage,\n3=major outage",
    "alertTransitionInterval" : 2,
    "alertClearTransitionInterval" : 1,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "namevalue",
    "postProcessorParam" : "##WILDVALUE##.status",
    "rawDataFieldName" : "output",
    "maxValue" : "3",
    "minValue" : "0",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : ">= 1 2 3",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : ""
  } ],
  "enableEriDiscovery" : false,
  "eriDiscoveryInterval" : -1,
  "eriDiscoveryConfig" : null
}